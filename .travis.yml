language: node_js
branches:
  only:
  - master
node_js:
- '8'
cache: yarn
install:
- npm i -g firebase-tools
- npm install -g @angular/cli
before_deploy:
- cd user-registration-app && npm install && ng build --prod && cd ..
- rvm default do gem install aws-sdk -v 2.1.36
deploy:
- provider: firebase
  project: hackpsu18
  on:
    branch: master
    repo: Hack-PSU/hackPSU-Frontend
  token:
      secure: "Ou4jtXLl15vvqlHV3q67bOeD2dlJ3o8/JijbgqxmeUybsmkbRVlmiGTr5x7VmdU/soebLD7nrv8CbIBFVBIaxqgbZdr68izabKxTRor8EgeTEnLf7miyW8iZ8a/pUpjh0Yu2a6Ds1tjCE7zn0F3MtgzqIzipnDB3uFBfvfEuhewyuDiewwGfotomwRQubkkPQIWE6jfmh7Twtnq+vM1cuFGgj3G2XFaSK2/IL2cCdaEyAggYwNtLNE8yTxnl9yfNALp35BSYzoxc8dX92J7368DlarDosUhCpt9ymwj/OtIjOV8WwXYexzGtEy5Eo24fpcDOv/YCZwNHXnT/Gd6y1z7hdfZIIAVK+rpSR21eR/heoNzXkl7zOnadYdQ9GQ99ibiWNvdT5whndV8qn4/mHHDdRbGWKSk75Qkru+D+1bZDZWj6DGsv/uzQdVRhShXxQa7RtkjFBZ4iXDSnQiJ+2I4lcR7+vvvaNaq+l0cjQ7a9ILg3phcdE/JXcS+M7UeQJnSwf83SF/HwvEwIK1WOETorB/17oow3xozWYj2v4S6e70gricMnqLQTu4+LQxxZjCvCSLRxegcHmREvjDeUSKW85DMNDPTpb6P2JKY8tM2si6G2xI+/+Dd2uDb6jGlAzKy4lyk1t8EbL2DM34HUKyaHx02pQQ+7Ubj2786X7Rw="
- provider: s3
  skip_cleanup: true
  access_key_id: AKIAI2D52LBRN2V2Z2MQ
  secret_access_key: "$AWS_SECRET_ACCESS_KEY"
  bucket: aws-website-hackpsu-app-27koh
  local-dir: user-registration-app/dist
  acl: public_read
  on:
    branch: master
    repo: Hack-PSU/hackPSU-Frontend
